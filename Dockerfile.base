FROM python:3.13-slim

# Install PostgreSQL, Node.js and Playwright
RUN apt-get update && apt-get install -y curl postgresql postgresql-contrib \
    && curl -fsSL https://deb.nodesource.com/setup_22.x | bash - \
    && apt-get install -y nodejs \
    && apt-get clean && rm -rf /var/lib/apt/lists/* \
    && npm install -g npx \
    && npx playwright install --with-deps

# Add PostgreSQL binaries to PATH
ENV PATH="/usr/lib/postgresql/17/bin:${PATH}"

WORKDIR /app
